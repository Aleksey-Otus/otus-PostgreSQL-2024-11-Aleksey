## 1. создать ВМ с Ubuntu 20.04/22.04 или развернуть докер любым удобным способом
Создана ВМ в Яндекс облаке, сгенерирован SSH ключ.
https://github.com/Aleksey-Otus/otus-PostgreSQL-2024-11-Aleksey/commit/73dcb940a1e05eed6be39a47305d9c38527d495a#diff-c4677b907bc285414ea86b76d18c3ca60f240d29c2adf8483e635fcc99e98e82R3

## 2. поставить на нем Docker Engine
## Установка Docker командой: 
curl -fsSL https://get.docker.com -o get-docker.sh && sudo sh get-docker.sh && rm get-docker.sh && sudo usermod -aG docker $USER && newgrp docker

## 3. сделать каталог /var/lib/postgres
Далее создал docker-сеть, командой:
sudo docker network create pg-net
67f6271172ef8aafcba1aaa5753776779ef7499b194c8850ade8339726520580
(https://github.com/user-attachments/assets/2a18749e-8a05-41ca-8fbb-1d4d8821d517)

## 4. развернуть контейнер с PostgreSQL 15 смонтировав в него /var/lib/postgresql
Далее подключил созданную сеть к контейнеру сервера Postgres, проверяем, что подключились, командой:
sudo docker run --name pg-server --network pg-net -e POSTGRES_PASSWORD=postgres -d -p 5432:5432 -v /var/lib/postgres:/var/lib/postgresql/data postgres:15

## 5. развернуть контейнер с клиентом postgres
Проверяем, что подключились через отдельный контейнер:
sudo docker ps -a
(https://github.com/user-attachments/assets/891bc2cf-9963-43e6-925c-ae2185ff81b9)


## 6. подключится из контейнера с клиентом к контейнеру с сервером и сделать таблицу с парой строк
Далее заходим в Postgres, командой:
sudo docker run -it --rm --network pg-net --name pg-client postgres:15 psql -h pg-server -U postgres
https://github.com/user-attachments/assets/d8b79023-1e93-4765-8283-68e8445ba1ce
Далее создаём БД otus, таблицу test и добавляем 2 записи:
CREATE DATABASE otus; 
https://github.com/user-attachments/assets/3334064f-ffc8-452a-9605-cc6317f431f7


## 7. подключится к контейнеру с сервером с ноутбука/компьютера извне инстансов ЯО/места установки докера
Далее подключились из другой сессии к БД otus, таблица test есть:
https://github.com/user-attachments/assets/eac51bfb-ced6-41fb-b496-8aa79e7e01fe


## 8. удалить контейнер с сервером
Далее удалили контейнер:
sudo docker stop 681fd7ac4707 
sudo docker rm 681fd7ac4707 
(https://github.com/user-attachments/assets/fb7a3f11-81b1-47e3-a574-a30b21c09c79)

## 9. создать его заново
Далее создали и запустили новый контейнер из оставшегося образа:
sudo docker run --name pg-server --network pg-net -e POSTGRES_PASSWORD=postgres -d -p 5432:5432 -v /var/lib/postgres:/var/lib/postgresql/data postgres:15
sudo docker run -it --rm --network pg-net --name pg-client postgres:15 psql -h pg-server -U postgres
(https://github.com/user-attachments/assets/43409d07-0465-460e-8f41-e877ef976766)

## 10. подключится снова из контейнера с клиентом к контейнеру с сервером
Проверили ID нового контейнера:
sudo docker ps -a
(https://github.com/user-attachments/assets/6f6f555f-635b-4aa9-8e4b-9d7bdda18db1)

Проверка подлючения к БД через 2ю сессию:
(https://github.com/user-attachments/assets/4bb52249-8a38-4853-88a9-485828b84e09)

## 11. проверить, что данные остались на месте
Все данные в контейнере остались: база данных и таблица с данными.
