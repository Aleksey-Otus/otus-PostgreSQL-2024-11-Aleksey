## 1. создать ВМ с Ubuntu 20.04/22.04 или развернуть докер любым удобным способом
Создана ВМ в Яндекс облаке, сгенерирован SSH ключ.

## 2. поставить на нем Docker Engine
## Установка Docker командой: 
curl -fsSL https://get.docker.com -o get-docker.sh && sudo sh get-docker.sh && rm get-docker.sh && sudo usermod -aG docker $USER && newgrp docker

## 3. сделать каталог /var/lib/postgres
Далее создал docker-сеть, командой:
sudo docker network create pg-net
67f6271172ef8aafcba1aaa5753776779ef7499b194c8850ade8339726520580


## 4. развернуть контейнер с PostgreSQL 15 смонтировав в него /var/lib/postgresql
Далее подключил созданную сеть к контейнеру сервера Postgres, проверяем, что подключились, командой:
sudo docker run --name pg-server --network pg-net -e POSTGRES_PASSWORD=postgres -d -p 5432:5432 -v /var/lib/postgres:/var/lib/postgresql/data postgres:15

## 5. развернуть контейнер с клиентом postgres
Проверяем, что подключились через отдельный контейнер:
sudo docker ps -a

## 6. подключится из контейнера с клиентом к контейнеру с сервером и сделать таблицу с парой строк
Далее заходим в Postgres, командой:
sudo docker run -it --rm --network pg-net --name pg-client postgres:15 psql -h pg-server -U postgres
https://github.com/user-attachments/assets/d8b79023-1e93-4765-8283-68e8445ba1ce
Далее создаём БД otus, таблицу test и добавляем 2 записи:
CREATE DATABASE otus; 

## 7. подключится к контейнеру с сервером с ноутбука/компьютера извне инстансов ЯО/места установки докера
Далее подключились из другой сессии к БД otus, таблица test есть:

## 8. удалить контейнер с сервером
Далее удалили контейнер:
sudo docker stop 681fd7ac4707 
sudo docker rm 681fd7ac4707 

## 9. создать его заново
Далее создали и запустили новый контейнер из оставшегося образа:
sudo docker run --name pg-server --network pg-net -e POSTGRES_PASSWORD=postgres -d -p 5432:5432 -v /var/lib/postgres:/var/lib/postgresql/data postgres:15
sudo docker run -it --rm --network pg-net --name pg-client postgres:15 psql -h pg-server -U postgres

## 10. подключится снова из контейнера с клиентом к контейнеру с сервером
Проверили ID нового контейнера:
sudo docker ps -a

Проверка подлючения к БД через 2ю сессию:

## 11. проверить, что данные остались на месте
Все данные в контейнере остались: база данных и таблица с данными.

![1 - Создана ВМ в Яндекс облаке](https://github.com/user-attachments/assets/fb596748-c09f-4c04-9134-1d2dfbc8a739)
![2 - создал docker-сеть](https://github.com/user-attachments/assets/be79a680-432c-4db1-8304-f6b9598fa5cb)
![3 - Проверяем, что подключились](https://github.com/user-attachments/assets/f57fcd0f-e3c1-42bc-a05d-2e560ddc95d0)
![4 - Далее заходим в Postgres](https://github.com/user-attachments/assets/b279820a-ffa9-4174-b916-b87fa15cb7d5)
![5 - Далее создаём БД otus](https://github.com/user-attachments/assets/fe7fe2b8-2fc3-4408-a96f-25ccf204e497)
![6 - подключились из другой сессии к БД otus](https://github.com/user-attachments/assets/de16b462-e50e-4921-9478-98b9a181dd56)
![7- удалили контейнер](https://github.com/user-attachments/assets/7abbae7f-bfa7-4829-86cd-400f27b69968)
![8 - запустили новый контейнер](https://github.com/user-attachments/assets/ef81ef61-a7ec-4331-baf5-63c6a0e0faec)
![9- Проверили ID нового контейнера](https://github.com/user-attachments/assets/e32dc26d-4238-4090-8785-0f6be57fe3c5)
![10 - Проверка подлючения к БД через 2ю сессию](https://github.com/user-attachments/assets/c3c47f46-8abb-4c8f-b5c3-491eaa5c252a)

